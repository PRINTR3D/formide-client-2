<!--
 *	This code was created for Printr B.V. It is open source under the formideos-interface package.
 *	Copyright (c) 2017, All rights reserved, http://printr.nl
-->

<header class="layout">
	<div class="layout__item u-1/2">
		<h3>Update Device</h3>
	</div>

	<div class="u-textRight layout__item u-1/2">
		<a class="btn btn--tertiary" ng-click="manage.navigate('/manage/device')">Manage Device</a>
	</div>
</header>

<button class="btn" ng-click="manageDeviceUpdate.doUpdate()" ng-disabled="!manageDeviceUpdate.deviceUpdateNeeded.needsUpdate || manageDeviceUpdate.updating">Start Update Process</button>
<span class="u-margin-left-1">{{ manageDeviceUpdate.deviceUpdateNeeded.message }}</span>

<section class="block u-margin-top-1" ng-class="{'block--disabled': !manageDeviceUpdate.updating}">
    <h5>Progress</h5>
    <progress-bar ng-class="{'progress--undefined': manageDeviceUpdate.valuenow < 100}" valuenow="{{manageDeviceUpdate.valuenow}}" valuemax="100"></progress-bar>

    <br/>

    <div ng-if="manageDeviceUpdate.updating && !manageDeviceUpdate.updated"><i class="fa fa-refresh fa-spin"></i> Updating, the device will come back online once updated.</li></div>
    <div ng-if="manageDeviceUpdate.updating && manageDeviceUpdate.updated"><i class="fa fa-check-circle"></i> {{ manageDeviceUpdate.deviceUpdateStatus.message }}!</li></div>
</section>
