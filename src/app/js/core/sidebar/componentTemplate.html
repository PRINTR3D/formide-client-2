<!--
 *	This code was created for Printr B.V. It is open source under the formide-client package.
 *	Copyright (c) 2017, All rights reserved, http://printr.nl
-->
<article class="main-sidebar-content">

	<section class="sm-hide sidebar-header" >
		<div ng-if="route.loggedIn === undefined || (route.loggedIn && vm.isLoggedIn) || (!route.loggedIn && !vm.isLoggedIn)" class="hide--sidebar" ng-click="$root.setSidebarInvisible()">
			<img src="./images/hamburger_expand.svg" alt="">
		</div>

		<h3 class="title">Printers</h3>
	</section>

	<section class="fade" id="sidebar-printers">
		<h3 class="xs-hide title">Printers</h3>


		<div ng-if="vm.resolved && vm.printer < 1" class="u-textCenter">
			<h3>No Printers Connected</h3>
		</div>

		<div ng-if="vm.resolved && vm.printer.length > 0" >

			<h4>Selected Printer</h4>

			<ul printer-list ng-if="vm.printerActive">
				<li printer-list-item
					printer="vm.printerActive"
					type="selected"
					class="selected-printer">
				</li>
			</ul>

			<p ng-if="!vm.printerActive" class="selected-printer-message">You currently have no selected printer<br/>Click on a printer below to select it</p>

			<br />
		</div>

		<div ng-if="vm.resolved && vm.printer.length > 0">
			<h4>Printers</h4>

			<ul printer-list>
				<li printer-list-item
					ng-repeat="printer in vm.printer"
					type="offline"
					printer="printer">
				</li>
			</ul>
		</div>

		<div ng-if="!vm.resolved" class="u-textCenter">
			<i class="fa fa-refresh fa-spin fa-3x"></i>
		</div>
	</section>
</article>

<div ng-if="vm.unknownPrinter || vm.slicingInProgress" class="btn-container xs-hide">
	<div ng-if="vm.unknownPrinter && !vm.slicingInProgress" ng-click="vm.printerSetupDialog()" class="setup-printer">
		<div class="layout">
			<span class="layout__item u-1/6"><i class="fa fa-2x fa-bell"></i></span>
			<small class="layout__item u-5/6">An unknown printer has been detected, click to set up this printer!</small>
		</div>
	</div>
	<div ng-if="vm.slicingInProgress" class="slicer-progress">
		<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="80px" viewBox="0 0 32 32" preserveAspectRatio="xMaxYMid slice">
		  <defs>
			<clipPath id="mask">
			  <circle cx="16" cy="16" r="16"/>
			</clipPath>
		  </defs>
			<path  fill="none" stroke="#CE6E3E" stroke-width=".2" opacity=".1"
			  d=" M-32 4 C-24 4 -24 28 -16 28 C-8 28 -8 4 0 4 C8 4 8 28 16 28 C24 28 24 8 32 8 ">
			  <animateTransform attributeName="transform" type="translate" values=" 0 0; 32 0 "
				dur="6s" repeatCount="indefinite" />
			</path>
			<path  fill="none" stroke="#CE6E3E" stroke-width=".2" opacity=".3"
			  d=" M-32 12 C-24 12 -24 20 -16 20 C-8 20 -8 12 0 12 C8 12 8 20 16 20 C24 20 24 12 32 12 ">
			  <animateTransform attributeName="transform" type="translate" values=" 0 0; 32 0 "
				dur="3s" repeatCount="indefinite" />
			</path>
			<path  fill="none" stroke="#CE6E3E" stroke-width=".2" opacity=".5"
			  d=" M-32 8 C-24 8 -24 24 -16 24 C-8 24 -8 8 0 8 C8 8 8 24 16 24 C24 24 24 8 32 8 ">
			  <animateTransform attributeName="transform" type="translate" values=" 0 0; 32 0 "
				dur="2s" repeatCount="indefinite" />
			</path>
		</svg>

		<h6 class="loader">Slicing in progress <span class="loader__dot">.</span><span class="loader__dot">.</span><span class="loader__dot">.</span></h6>
		<div ng-style="{opacity:vm.setVisible($index)}" ng-repeat="message in vm.sliceMessages">
			<small>{{message | title}}</small>
		</div>
	</div>
</div>

<ng-transclude></ng-transclude>


<script type="text/ng-template" id="formideConnect">

	<formide-connect></formide-connect>

</script>
